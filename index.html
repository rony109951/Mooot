<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>القرآن الكريم</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: black; color: white; font-family: "Amiri", serif; }
    .active-ayah { border-bottom: 3px solid yellow; }
    .ayah { display: inline-block; margin: 4px; font-size: 20px; }
  </style>
</head>
<body class="text-white">

  <!-- اللوجو -->
  <div class="w-full" style="height:300px;">
    <img src="moot.png" alt="logo" class="w-full h-full object-cover">
  </div>

  <!-- العنوان -->
  <h2 class="text-center text-yellow-400 text-2xl my-4">
    صدقة جارية على حرم رمضان عبدالهادي - محمد رمضان الصعيدي "وكل متوفي"
  </h2>

  <!-- قائمة السور -->
  <div id="surahList" class="grid grid-cols-2 gap-4 p-4"></div>

  <!-- محتوى السورة -->
  <div id="content" class="hidden text-center p-6">
    <button id="backBtn" class="bg-yellow-500 text-black px-4 py-2 rounded mb-4">⬅️ رجوع</button>
    <h2 id="surahName" class="text-3xl text-yellow-400 mb-4"></h2>
    <audio id="player" controls class="w-11/12 mx-auto mb-6"></audio>
    <div id="ayahs" class="text-xl leading-loose"></div>
  </div>

  <!-- الفوتر -->
  <footer class="text-center text-gray-400 py-6 mt-10 border-t border-gray-700">
    <p>تم تطوير موقع مجانا للتواصل واتساب فقط: <span class="text-yellow-400">01212843252</span></p>
    <p>جميع الحقوق محفوظة © 2025</p>
  </footer>

  <script>
    const surahListDiv = document.getElementById("surahList");
    const content = document.getElementById("content");
    const surahNameEl = document.getElementById("surahName");
    const ayahsDiv = document.getElementById("ayahs");
    const player = document.getElementById("player");
    const backBtn = document.getElementById("backBtn");

    // جلب قائمة السور
    fetch("https://api.alquran.cloud/v1/surah")
      .then(res => res.json())
      .then(data => {
        data.data.forEach(surah => {
          const btn = document.createElement("button");
          btn.className = "bg-gray-800 hover:bg-yellow-400 hover:text-black text-white py-3 rounded-lg transition";
          btn.textContent = surah.name;
          btn.onclick = () => loadSurah(surah.number, surah.name);
          surahListDiv.appendChild(btn);
        });
      });

    // تحميل السورة
    async function loadSurah(number, name) {
      surahListDiv.classList.add("hidden");
      content.classList.remove("hidden");
      surahNameEl.textContent = name;

      // النص
      const res = await fetch(`https://api.alquran.cloud/v1/surah/${number}`);
      const data = await res.json();
      ayahsDiv.innerHTML = "";
      data.data.ayahs.forEach((ayah, i) => {
        const span = document.createElement("span");
        span.className = "ayah";
        span.id = "ayah-" + i;
        span.textContent = ayah.text + " ";
        ayahsDiv.appendChild(span);
      });

      // الصوت (مشاري راشد)
      player.src = `https://cdn.islamic.network/quran/audio-surah/128/ar.alafasy/${number}.mp3`;
      player.play();

      // تحديد الآية (كاريوكي بسيط حسب التوقيت)
      player.ontimeupdate = () => {
        const currentTime = player.currentTime;
        const index = Math.floor(currentTime / 5); // تقريب: كل آية ~5 ثواني
        document.querySelectorAll(".ayah").forEach(a => a.classList.remove("active-ayah"));
        const active = document.getElementById("ayah-" + index);
        if (active) active.classList.add("active-ayah");
      };
    }

    // رجوع للقائمة
    backBtn.onclick = () => {
      content.classList.add("hidden");
      surahListDiv.classList.remove("hidden");
      player.pause();
    };
  </script>
</body>
</html>
